{"remainingRequest":"/home/igor/1_pet_projects/4_todo_urgenta/frontend/node_modules/babel-loader/lib/index.js!/home/igor/1_pet_projects/4_todo_urgenta/frontend/node_modules/vuetify/lib/components/VCalendar/mixins/calendar-with-events.js","dependencies":[{"path":"/home/igor/1_pet_projects/4_todo_urgenta/frontend/node_modules/vuetify/lib/components/VCalendar/mixins/calendar-with-events.js","mtime":1649410682820},{"path":"/home/igor/1_pet_projects/4_todo_urgenta/frontend/babel.config.js","mtime":1650298088740},{"path":"/home/igor/1_pet_projects/4_todo_urgenta/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1649410681772},{"path":"/home/igor/1_pet_projects/4_todo_urgenta/frontend/node_modules/babel-loader/lib/index.js","mtime":1649410682196}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF90eXBlb2YgZnJvbSAiL2hvbWUvaWdvci8xX3BldF9wcm9qZWN0cy80X3RvZG9fdXJnZW50YS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vdHlwZW9mLmpzIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiL2hvbWUvaWdvci8xX3BldF9wcm9qZWN0cy80X3RvZG9fdXJnZW50YS9mcm9udGVuZC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vb2JqZWN0U3ByZWFkMi5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnBhcnNlLWludC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNvcnQuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0LmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyLmpzIjsKLy8gU3R5bGVzCmltcG9ydCAiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVkNhbGVuZGFyL21peGlucy9jYWxlbmRhci13aXRoLWV2ZW50cy5zYXNzIjsgLy8gRGlyZWN0aXZlcwoKaW1wb3J0IHJpcHBsZSBmcm9tICcuLi8uLi8uLi9kaXJlY3RpdmVzL3JpcHBsZSc7IC8vIE1peGlucwoKaW1wb3J0IENhbGVuZGFyQmFzZSBmcm9tICcuL2NhbGVuZGFyLWJhc2UnOyAvLyBIZWxwZXJzCgppbXBvcnQgeyBlc2NhcGVIVE1MIH0gZnJvbSAnLi4vLi4vLi4vdXRpbC9oZWxwZXJzJzsgLy8gVXRpbAoKaW1wb3J0IHByb3BzIGZyb20gJy4uL3V0aWwvcHJvcHMnOwppbXBvcnQgeyBDYWxlbmRhckV2ZW50T3ZlcmxhcE1vZGVzIH0gZnJvbSAnLi4vbW9kZXMnOwppbXBvcnQgeyBnZXREYXlJZGVudGlmaWVyLCBkaWZmTWludXRlcyB9IGZyb20gJy4uL3V0aWwvdGltZXN0YW1wJzsKaW1wb3J0IHsgcGFyc2VFdmVudCBhcyBfcGFyc2VFdmVudCwgaXNFdmVudFN0YXJ0LCBpc0V2ZW50T24sIGlzRXZlbnRPdmVybGFwcGluZywgaXNFdmVudEhpZGRlbk9uIH0gZnJvbSAnLi4vdXRpbC9ldmVudHMnOwp2YXIgV0lEVEhfRlVMTCA9IDEwMDsKdmFyIFdJRFRIX1NUQVJUID0gOTU7CnZhciBNSU5VVEVTX0lOX0RBWSA9IDE0NDA7Ci8qIEB2dWUvY29tcG9uZW50ICovCgpleHBvcnQgZGVmYXVsdCBDYWxlbmRhckJhc2UuZXh0ZW5kKHsKICBuYW1lOiAnY2FsZW5kYXItd2l0aC1ldmVudHMnLAogIGRpcmVjdGl2ZXM6IHsKICAgIHJpcHBsZTogcmlwcGxlCiAgfSwKICBwcm9wczogX29iamVjdFNwcmVhZChfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHByb3BzLmV2ZW50cyksIHByb3BzLmNhbGVuZGFyKSwgcHJvcHMuY2F0ZWdvcnkpLAogIGNvbXB1dGVkOiB7CiAgICBub0V2ZW50czogZnVuY3Rpb24gbm9FdmVudHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5sZW5ndGggPT09IDA7CiAgICB9LAogICAgcGFyc2VkRXZlbnRzOiBmdW5jdGlvbiBwYXJzZWRFdmVudHMoKSB7CiAgICAgIHJldHVybiB0aGlzLmV2ZW50cy5tYXAodGhpcy5wYXJzZUV2ZW50KTsKICAgIH0sCiAgICBwYXJzZWRFdmVudE92ZXJsYXBUaHJlc2hvbGQ6IGZ1bmN0aW9uIHBhcnNlZEV2ZW50T3ZlcmxhcFRocmVzaG9sZCgpIHsKICAgICAgcmV0dXJuIHBhcnNlSW50KHRoaXMuZXZlbnRPdmVybGFwVGhyZXNob2xkKTsKICAgIH0sCiAgICBldmVudFRpbWVkRnVuY3Rpb246IGZ1bmN0aW9uIGV2ZW50VGltZWRGdW5jdGlvbigpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHJldHVybiB0eXBlb2YgdGhpcy5ldmVudFRpbWVkID09PSAnZnVuY3Rpb24nID8gdGhpcy5ldmVudFRpbWVkIDogZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuICEhZXZlbnRbX3RoaXMuZXZlbnRUaW1lZF07CiAgICAgIH07CiAgICB9LAogICAgZXZlbnRDYXRlZ29yeUZ1bmN0aW9uOiBmdW5jdGlvbiBldmVudENhdGVnb3J5RnVuY3Rpb24oKSB7CiAgICAgIHZhciBfdGhpczIgPSB0aGlzOwoKICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmV2ZW50Q2F0ZWdvcnkgPT09ICdmdW5jdGlvbicgPyB0aGlzLmV2ZW50Q2F0ZWdvcnkgOiBmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICByZXR1cm4gZXZlbnRbX3RoaXMyLmV2ZW50Q2F0ZWdvcnldOwogICAgICB9OwogICAgfSwKICAgIGV2ZW50VGV4dENvbG9yRnVuY3Rpb246IGZ1bmN0aW9uIGV2ZW50VGV4dENvbG9yRnVuY3Rpb24oKSB7CiAgICAgIHZhciBfdGhpczMgPSB0aGlzOwoKICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmV2ZW50VGV4dENvbG9yID09PSAnZnVuY3Rpb24nID8gdGhpcy5ldmVudFRleHRDb2xvciA6IGZ1bmN0aW9uICgpIHsKICAgICAgICByZXR1cm4gX3RoaXMzLmV2ZW50VGV4dENvbG9yOwogICAgICB9OwogICAgfSwKICAgIGV2ZW50TmFtZUZ1bmN0aW9uOiBmdW5jdGlvbiBldmVudE5hbWVGdW5jdGlvbigpIHsKICAgICAgdmFyIF90aGlzNCA9IHRoaXM7CgogICAgICByZXR1cm4gdHlwZW9mIHRoaXMuZXZlbnROYW1lID09PSAnZnVuY3Rpb24nID8gdGhpcy5ldmVudE5hbWUgOiBmdW5jdGlvbiAoZXZlbnQsIHRpbWVkRXZlbnQpIHsKICAgICAgICByZXR1cm4gZXNjYXBlSFRNTChldmVudC5pbnB1dFtfdGhpczQuZXZlbnROYW1lXSB8fCAnJyk7CiAgICAgIH07CiAgICB9LAogICAgZXZlbnRNb2RlRnVuY3Rpb246IGZ1bmN0aW9uIGV2ZW50TW9kZUZ1bmN0aW9uKCkgewogICAgICByZXR1cm4gdHlwZW9mIHRoaXMuZXZlbnRPdmVybGFwTW9kZSA9PT0gJ2Z1bmN0aW9uJyA/IHRoaXMuZXZlbnRPdmVybGFwTW9kZSA6IENhbGVuZGFyRXZlbnRPdmVybGFwTW9kZXNbdGhpcy5ldmVudE92ZXJsYXBNb2RlXTsKICAgIH0sCiAgICBldmVudFdlZWtkYXlzOiBmdW5jdGlvbiBldmVudFdlZWtkYXlzKCkgewogICAgICByZXR1cm4gdGhpcy5wYXJzZWRXZWVrZGF5czsKICAgIH0sCiAgICBjYXRlZ29yeU1vZGU6IGZ1bmN0aW9uIGNhdGVnb3J5TW9kZSgpIHsKICAgICAgcmV0dXJuIHRoaXMudHlwZSA9PT0gJ2NhdGVnb3J5JzsKICAgIH0KICB9LAogIG1ldGhvZHM6IHsKICAgIGV2ZW50Q29sb3JGdW5jdGlvbjogZnVuY3Rpb24gZXZlbnRDb2xvckZ1bmN0aW9uKGUpIHsKICAgICAgcmV0dXJuIHR5cGVvZiB0aGlzLmV2ZW50Q29sb3IgPT09ICdmdW5jdGlvbicgPyB0aGlzLmV2ZW50Q29sb3IoZSkgOiBlLmNvbG9yIHx8IHRoaXMuZXZlbnRDb2xvcjsKICAgIH0sCiAgICBwYXJzZUV2ZW50OiBmdW5jdGlvbiBwYXJzZUV2ZW50KGlucHV0KSB7CiAgICAgIHZhciBpbmRleCA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogMDsKICAgICAgcmV0dXJuIF9wYXJzZUV2ZW50KGlucHV0LCBpbmRleCwgdGhpcy5ldmVudFN0YXJ0LCB0aGlzLmV2ZW50RW5kLCB0aGlzLmV2ZW50VGltZWRGdW5jdGlvbihpbnB1dCksIHRoaXMuY2F0ZWdvcnlNb2RlID8gdGhpcy5ldmVudENhdGVnb3J5RnVuY3Rpb24oaW5wdXQpIDogZmFsc2UpOwogICAgfSwKICAgIGZvcm1hdFRpbWU6IGZ1bmN0aW9uIGZvcm1hdFRpbWUod2l0aFRpbWUsIGFtcG0pIHsKICAgICAgdmFyIGZvcm1hdHRlciA9IHRoaXMuZ2V0Rm9ybWF0dGVyKHsKICAgICAgICB0aW1lWm9uZTogJ1VUQycsCiAgICAgICAgaG91cjogJ251bWVyaWMnLAogICAgICAgIG1pbnV0ZTogd2l0aFRpbWUubWludXRlID4gMCA/ICdudW1lcmljJyA6IHVuZGVmaW5lZAogICAgICB9KTsKICAgICAgcmV0dXJuIGZvcm1hdHRlcih3aXRoVGltZSwgdHJ1ZSk7CiAgICB9LAogICAgdXBkYXRlRXZlbnRWaXNpYmlsaXR5OiBmdW5jdGlvbiB1cGRhdGVFdmVudFZpc2liaWxpdHkoKSB7CiAgICAgIGlmICh0aGlzLm5vRXZlbnRzIHx8ICF0aGlzLmV2ZW50TW9yZSkgewogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdmFyIGV2ZW50SGVpZ2h0ID0gdGhpcy5ldmVudEhlaWdodDsKICAgICAgdmFyIGV2ZW50c01hcCA9IHRoaXMuZ2V0RXZlbnRzTWFwKCk7CgogICAgICBmb3IgKHZhciBkYXRlIGluIGV2ZW50c01hcCkgewogICAgICAgIHZhciBfZXZlbnRzTWFwJGRhdGUgPSBldmVudHNNYXBbZGF0ZV0sCiAgICAgICAgICAgIHBhcmVudCA9IF9ldmVudHNNYXAkZGF0ZS5wYXJlbnQsCiAgICAgICAgICAgIGV2ZW50cyA9IF9ldmVudHNNYXAkZGF0ZS5ldmVudHMsCiAgICAgICAgICAgIG1vcmUgPSBfZXZlbnRzTWFwJGRhdGUubW9yZTsKCiAgICAgICAgaWYgKCFtb3JlKSB7CiAgICAgICAgICBicmVhazsKICAgICAgICB9CgogICAgICAgIHZhciBwYXJlbnRCb3VuZHMgPSBwYXJlbnQuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7CiAgICAgICAgdmFyIGxhc3QgPSBldmVudHMubGVuZ3RoIC0gMTsKICAgICAgICB2YXIgZXZlbnRzU29ydGVkID0gZXZlbnRzLm1hcChmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICAgIHJldHVybiB7CiAgICAgICAgICAgIGV2ZW50OiBldmVudCwKICAgICAgICAgICAgYm90dG9tOiBldmVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS5ib3R0b20KICAgICAgICAgIH07CiAgICAgICAgfSkuc29ydChmdW5jdGlvbiAoYSwgYikgewogICAgICAgICAgcmV0dXJuIGEuYm90dG9tIC0gYi5ib3R0b207CiAgICAgICAgfSk7CiAgICAgICAgdmFyIGhpZGRlbiA9IDA7CgogICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDw9IGxhc3Q7IGkrKykgewogICAgICAgICAgdmFyIGJvdHRvbSA9IGV2ZW50c1NvcnRlZFtpXS5ib3R0b207CiAgICAgICAgICB2YXIgaGlkZSA9IGkgPT09IGxhc3QgPyBib3R0b20gPiBwYXJlbnRCb3VuZHMuYm90dG9tIDogYm90dG9tICsgZXZlbnRIZWlnaHQgPiBwYXJlbnRCb3VuZHMuYm90dG9tOwoKICAgICAgICAgIGlmIChoaWRlKSB7CiAgICAgICAgICAgIGV2ZW50c1NvcnRlZFtpXS5ldmVudC5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnOwogICAgICAgICAgICBoaWRkZW4rKzsKICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIGlmIChoaWRkZW4pIHsKICAgICAgICAgIG1vcmUuc3R5bGUuZGlzcGxheSA9ICcnOwogICAgICAgICAgbW9yZS5pbm5lckhUTUwgPSB0aGlzLiR2dWV0aWZ5LmxhbmcudCh0aGlzLmV2ZW50TW9yZVRleHQsIGhpZGRlbik7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIG1vcmUuc3R5bGUuZGlzcGxheSA9ICdub25lJzsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICBnZXRFdmVudHNNYXA6IGZ1bmN0aW9uIGdldEV2ZW50c01hcCgpIHsKICAgICAgdmFyIGV2ZW50c01hcCA9IHt9OwogICAgICB2YXIgZWxlbWVudHMgPSB0aGlzLiRyZWZzLmV2ZW50czsKCiAgICAgIGlmICghZWxlbWVudHMgfHwgIWVsZW1lbnRzLmZvckVhY2gpIHsKICAgICAgICByZXR1cm4gZXZlbnRzTWFwOwogICAgICB9CgogICAgICBlbGVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChlbCkgewogICAgICAgIHZhciBkYXRlID0gZWwuZ2V0QXR0cmlidXRlKCdkYXRhLWRhdGUnKTsKCiAgICAgICAgaWYgKGVsLnBhcmVudEVsZW1lbnQgJiYgZGF0ZSkgewogICAgICAgICAgaWYgKCEoZGF0ZSBpbiBldmVudHNNYXApKSB7CiAgICAgICAgICAgIGV2ZW50c01hcFtkYXRlXSA9IHsKICAgICAgICAgICAgICBwYXJlbnQ6IGVsLnBhcmVudEVsZW1lbnQsCiAgICAgICAgICAgICAgbW9yZTogbnVsbCwKICAgICAgICAgICAgICBldmVudHM6IFtdCiAgICAgICAgICAgIH07CiAgICAgICAgICB9CgogICAgICAgICAgaWYgKGVsLmdldEF0dHJpYnV0ZSgnZGF0YS1tb3JlJykpIHsKICAgICAgICAgICAgZXZlbnRzTWFwW2RhdGVdLm1vcmUgPSBlbDsKICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIGV2ZW50c01hcFtkYXRlXS5ldmVudHMucHVzaChlbCk7CiAgICAgICAgICAgIGVsLnN0eWxlLmRpc3BsYXkgPSAnJzsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0pOwogICAgICByZXR1cm4gZXZlbnRzTWFwOwogICAgfSwKICAgIGdlbkRheUV2ZW50OiBmdW5jdGlvbiBnZW5EYXlFdmVudChfcmVmLCBkYXkpIHsKICAgICAgdmFyIGV2ZW50ID0gX3JlZi5ldmVudDsKICAgICAgdmFyIGV2ZW50SGVpZ2h0ID0gdGhpcy5ldmVudEhlaWdodDsKICAgICAgdmFyIGV2ZW50TWFyZ2luQm90dG9tID0gdGhpcy5ldmVudE1hcmdpbkJvdHRvbTsKICAgICAgdmFyIGRheUlkZW50aWZpZXIgPSBnZXREYXlJZGVudGlmaWVyKGRheSk7CiAgICAgIHZhciB3ZWVrID0gZGF5LndlZWs7CiAgICAgIHZhciBzdGFydCA9IGRheUlkZW50aWZpZXIgPT09IGV2ZW50LnN0YXJ0SWRlbnRpZmllcjsKICAgICAgdmFyIGVuZCA9IGRheUlkZW50aWZpZXIgPT09IGV2ZW50LmVuZElkZW50aWZpZXI7CiAgICAgIHZhciB3aWR0aCA9IFdJRFRIX1NUQVJUOwoKICAgICAgaWYgKCF0aGlzLmNhdGVnb3J5TW9kZSkgewogICAgICAgIGZvciAodmFyIGkgPSBkYXkuaW5kZXggKyAxOyBpIDwgd2Vlay5sZW5ndGg7IGkrKykgewogICAgICAgICAgdmFyIHdlZWtkYXlJZGVudGlmaWVyID0gZ2V0RGF5SWRlbnRpZmllcih3ZWVrW2ldKTsKCiAgICAgICAgICBpZiAoZXZlbnQuZW5kSWRlbnRpZmllciA+PSB3ZWVrZGF5SWRlbnRpZmllcikgewogICAgICAgICAgICB3aWR0aCArPSBXSURUSF9GVUxMOwogICAgICAgICAgICBlbmQgPSBlbmQgfHwgd2Vla2RheUlkZW50aWZpZXIgPT09IGV2ZW50LmVuZElkZW50aWZpZXI7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBlbmQgPSB0cnVlOwogICAgICAgICAgICBicmVhazsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH0KCiAgICAgIHZhciBzY29wZSA9IHsKICAgICAgICBldmVudFBhcnNlZDogZXZlbnQsCiAgICAgICAgZGF5OiBkYXksCiAgICAgICAgc3RhcnQ6IHN0YXJ0LAogICAgICAgIGVuZDogZW5kLAogICAgICAgIHRpbWVkOiBmYWxzZQogICAgICB9OwogICAgICByZXR1cm4gdGhpcy5nZW5FdmVudChldmVudCwgc2NvcGUsIGZhbHNlLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWV2ZW50JywKICAgICAgICAiY2xhc3MiOiB7CiAgICAgICAgICAndi1ldmVudC1zdGFydCc6IHN0YXJ0LAogICAgICAgICAgJ3YtZXZlbnQtZW5kJzogZW5kCiAgICAgICAgfSwKICAgICAgICBzdHlsZTogewogICAgICAgICAgaGVpZ2h0OiAiIi5jb25jYXQoZXZlbnRIZWlnaHQsICJweCIpLAogICAgICAgICAgd2lkdGg6ICIiLmNvbmNhdCh3aWR0aCwgIiUiKSwKICAgICAgICAgICdtYXJnaW4tYm90dG9tJzogIiIuY29uY2F0KGV2ZW50TWFyZ2luQm90dG9tLCAicHgiKQogICAgICAgIH0sCiAgICAgICAgYXR0cnM6IHsKICAgICAgICAgICdkYXRhLWRhdGUnOiBkYXkuZGF0ZQogICAgICAgIH0sCiAgICAgICAga2V5OiBldmVudC5pbmRleCwKICAgICAgICByZWY6ICdldmVudHMnLAogICAgICAgIHJlZkluRm9yOiB0cnVlCiAgICAgIH0pOwogICAgfSwKICAgIGdlblRpbWVkRXZlbnQ6IGZ1bmN0aW9uIGdlblRpbWVkRXZlbnQoX3JlZjIsIGRheSkgewogICAgICB2YXIgZXZlbnQgPSBfcmVmMi5ldmVudCwKICAgICAgICAgIGxlZnQgPSBfcmVmMi5sZWZ0LAogICAgICAgICAgd2lkdGggPSBfcmVmMi53aWR0aDsKCiAgICAgIGlmIChkYXkudGltZURlbHRhKGV2ZW50LmVuZCkgPCAwIHx8IGRheS50aW1lRGVsdGEoZXZlbnQuc3RhcnQpID49IDEgfHwgaXNFdmVudEhpZGRlbk9uKGV2ZW50LCBkYXkpKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CgogICAgICB2YXIgZGF5SWRlbnRpZmllciA9IGdldERheUlkZW50aWZpZXIoZGF5KTsKICAgICAgdmFyIHN0YXJ0ID0gZXZlbnQuc3RhcnRJZGVudGlmaWVyID49IGRheUlkZW50aWZpZXI7CiAgICAgIHZhciBlbmQgPSBldmVudC5lbmRJZGVudGlmaWVyID4gZGF5SWRlbnRpZmllcjsKICAgICAgdmFyIHRvcCA9IHN0YXJ0ID8gZGF5LnRpbWVUb1koZXZlbnQuc3RhcnQpIDogMDsKICAgICAgdmFyIGJvdHRvbSA9IGVuZCA/IGRheS50aW1lVG9ZKE1JTlVURVNfSU5fREFZKSA6IGRheS50aW1lVG9ZKGV2ZW50LmVuZCk7CiAgICAgIHZhciBoZWlnaHQgPSBNYXRoLm1heCh0aGlzLmV2ZW50SGVpZ2h0LCBib3R0b20gLSB0b3ApOwogICAgICB2YXIgc2NvcGUgPSB7CiAgICAgICAgZXZlbnRQYXJzZWQ6IGV2ZW50LAogICAgICAgIGRheTogZGF5LAogICAgICAgIHN0YXJ0OiBzdGFydCwKICAgICAgICBlbmQ6IGVuZCwKICAgICAgICB0aW1lZDogdHJ1ZQogICAgICB9OwogICAgICByZXR1cm4gdGhpcy5nZW5FdmVudChldmVudCwgc2NvcGUsIHRydWUsIHsKICAgICAgICBzdGF0aWNDbGFzczogJ3YtZXZlbnQtdGltZWQnLAogICAgICAgIHN0eWxlOiB7CiAgICAgICAgICB0b3A6ICIiLmNvbmNhdCh0b3AsICJweCIpLAogICAgICAgICAgaGVpZ2h0OiAiIi5jb25jYXQoaGVpZ2h0LCAicHgiKSwKICAgICAgICAgIGxlZnQ6ICIiLmNvbmNhdChsZWZ0LCAiJSIpLAogICAgICAgICAgd2lkdGg6ICIiLmNvbmNhdCh3aWR0aCwgIiUiKQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2VuRXZlbnQ6IGZ1bmN0aW9uIGdlbkV2ZW50KGV2ZW50LCBzY29wZUlucHV0LCB0aW1lZEV2ZW50LCBkYXRhKSB7CiAgICAgIHZhciBfdGhpczUgPSB0aGlzOwoKICAgICAgdmFyIF90aGlzJGV2ZW50UmlwcGxlOwoKICAgICAgdmFyIHNsb3QgPSB0aGlzLiRzY29wZWRTbG90cy5ldmVudDsKICAgICAgdmFyIHRleHQgPSB0aGlzLmV2ZW50VGV4dENvbG9yRnVuY3Rpb24oZXZlbnQuaW5wdXQpOwogICAgICB2YXIgYmFja2dyb3VuZCA9IHRoaXMuZXZlbnRDb2xvckZ1bmN0aW9uKGV2ZW50LmlucHV0KTsKICAgICAgdmFyIG92ZXJsYXBzTm9vbiA9IGV2ZW50LnN0YXJ0LmhvdXIgPCAxMiAmJiBldmVudC5lbmQuaG91ciA+PSAxMjsKICAgICAgdmFyIHNpbmdsaW5lID0gZGlmZk1pbnV0ZXMoZXZlbnQuc3RhcnQsIGV2ZW50LmVuZCkgPD0gdGhpcy5wYXJzZWRFdmVudE92ZXJsYXBUaHJlc2hvbGQ7CiAgICAgIHZhciBmb3JtYXRUaW1lID0gdGhpcy5mb3JtYXRUaW1lOwoKICAgICAgdmFyIHRpbWVTdW1tYXJ5ID0gZnVuY3Rpb24gdGltZVN1bW1hcnkoKSB7CiAgICAgICAgcmV0dXJuIGZvcm1hdFRpbWUoZXZlbnQuc3RhcnQsIG92ZXJsYXBzTm9vbikgKyAnIC0gJyArIGZvcm1hdFRpbWUoZXZlbnQuZW5kLCB0cnVlKTsKICAgICAgfTsKCiAgICAgIHZhciBldmVudFN1bW1hcnkgPSBmdW5jdGlvbiBldmVudFN1bW1hcnkoKSB7CiAgICAgICAgdmFyIG5hbWUgPSBfdGhpczUuZXZlbnROYW1lRnVuY3Rpb24oZXZlbnQsIHRpbWVkRXZlbnQpOwoKICAgICAgICBpZiAoZXZlbnQuc3RhcnQuaGFzVGltZSkgewogICAgICAgICAgdmFyIGV2ZW50U3VtbWFyeUNsYXNzID0gJ3YtZXZlbnQtc3VtbWFyeSc7CgogICAgICAgICAgaWYgKHRpbWVkRXZlbnQpIHsKICAgICAgICAgICAgdmFyIHRpbWUgPSB0aW1lU3VtbWFyeSgpOwogICAgICAgICAgICB2YXIgZGVsaW1pdGVyID0gc2luZ2xpbmUgPyAnLCAnIDogJzxicj4nOwogICAgICAgICAgICByZXR1cm4gIjxzcGFuIGNsYXNzPVwiIi5jb25jYXQoZXZlbnRTdW1tYXJ5Q2xhc3MsICJcIj48c3Ryb25nPiIpLmNvbmNhdChuYW1lLCAiPC9zdHJvbmc+IikuY29uY2F0KGRlbGltaXRlcikuY29uY2F0KHRpbWUsICI8L3NwYW4+Iik7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICB2YXIgX3RpbWUgPSBmb3JtYXRUaW1lKGV2ZW50LnN0YXJ0LCB0cnVlKTsKCiAgICAgICAgICAgIHJldHVybiAiPHNwYW4gY2xhc3M9XCIiLmNvbmNhdChldmVudFN1bW1hcnlDbGFzcywgIlwiPjxzdHJvbmc+IikuY29uY2F0KF90aW1lLCAiPC9zdHJvbmc+ICIpLmNvbmNhdChuYW1lLCAiPC9zcGFuPiIpOwogICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICAgIH07CgogICAgICB2YXIgc2NvcGUgPSBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNjb3BlSW5wdXQpLCB7fSwgewogICAgICAgIGV2ZW50OiBldmVudC5pbnB1dCwKICAgICAgICBvdXRzaWRlOiBzY29wZUlucHV0LmRheS5vdXRzaWRlLAogICAgICAgIHNpbmdsaW5lOiBzaW5nbGluZSwKICAgICAgICBvdmVybGFwc05vb246IG92ZXJsYXBzTm9vbiwKICAgICAgICBmb3JtYXRUaW1lOiBmb3JtYXRUaW1lLAogICAgICAgIHRpbWVTdW1tYXJ5OiB0aW1lU3VtbWFyeSwKICAgICAgICBldmVudFN1bW1hcnk6IGV2ZW50U3VtbWFyeQogICAgICB9KTsKCiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB0aGlzLnNldFRleHRDb2xvcih0ZXh0LCB0aGlzLnNldEJhY2tncm91bmRDb2xvcihiYWNrZ3JvdW5kLCBfb2JqZWN0U3ByZWFkKHsKICAgICAgICBvbjogdGhpcy5nZXREZWZhdWx0TW91c2VFdmVudEhhbmRsZXJzKCc6ZXZlbnQnLCBmdW5jdGlvbiAobmF0aXZlRXZlbnQpIHsKICAgICAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNjb3BlKSwge30sIHsKICAgICAgICAgICAgbmF0aXZlRXZlbnQ6IG5hdGl2ZUV2ZW50CiAgICAgICAgICB9KTsKICAgICAgICB9KSwKICAgICAgICBkaXJlY3RpdmVzOiBbewogICAgICAgICAgbmFtZTogJ3JpcHBsZScsCiAgICAgICAgICB2YWx1ZTogKF90aGlzJGV2ZW50UmlwcGxlID0gdGhpcy5ldmVudFJpcHBsZSkgIT0gbnVsbCA/IF90aGlzJGV2ZW50UmlwcGxlIDogdHJ1ZQogICAgICAgIH1dCiAgICAgIH0sIGRhdGEpKSksIHNsb3QgPyBzbG90KHNjb3BlKSA6IFt0aGlzLmdlbk5hbWUoZXZlbnRTdW1tYXJ5KV0pOwogICAgfSwKICAgIGdlbk5hbWU6IGZ1bmN0aW9uIGdlbk5hbWUoZXZlbnRTdW1tYXJ5KSB7CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICdwbC0xJywKICAgICAgICBkb21Qcm9wczogewogICAgICAgICAgaW5uZXJIVE1MOiBldmVudFN1bW1hcnkoKQogICAgICAgIH0KICAgICAgfSk7CiAgICB9LAogICAgZ2VuUGxhY2Vob2xkZXI6IGZ1bmN0aW9uIGdlblBsYWNlaG9sZGVyKGRheSkgewogICAgICB2YXIgaGVpZ2h0ID0gdGhpcy5ldmVudEhlaWdodCArIHRoaXMuZXZlbnRNYXJnaW5Cb3R0b207CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGhlaWdodDogIiIuY29uY2F0KGhlaWdodCwgInB4IikKICAgICAgICB9LAogICAgICAgIGF0dHJzOiB7CiAgICAgICAgICAnZGF0YS1kYXRlJzogZGF5LmRhdGUKICAgICAgICB9LAogICAgICAgIHJlZjogJ2V2ZW50cycsCiAgICAgICAgcmVmSW5Gb3I6IHRydWUKICAgICAgfSk7CiAgICB9LAogICAgZ2VuTW9yZTogZnVuY3Rpb24gZ2VuTW9yZShkYXkpIHsKICAgICAgdmFyIF90aGlzJGV2ZW50UmlwcGxlMjsKCiAgICAgIHZhciBldmVudEhlaWdodCA9IHRoaXMuZXZlbnRIZWlnaHQ7CiAgICAgIHZhciBldmVudE1hcmdpbkJvdHRvbSA9IHRoaXMuZXZlbnRNYXJnaW5Cb3R0b207CiAgICAgIHJldHVybiB0aGlzLiRjcmVhdGVFbGVtZW50KCdkaXYnLCB7CiAgICAgICAgc3RhdGljQ2xhc3M6ICd2LWV2ZW50LW1vcmUgcGwtMScsCiAgICAgICAgImNsYXNzIjogewogICAgICAgICAgJ3Ytb3V0c2lkZSc6IGRheS5vdXRzaWRlCiAgICAgICAgfSwKICAgICAgICBhdHRyczogewogICAgICAgICAgJ2RhdGEtZGF0ZSc6IGRheS5kYXRlLAogICAgICAgICAgJ2RhdGEtbW9yZSc6IDEKICAgICAgICB9LAogICAgICAgIGRpcmVjdGl2ZXM6IFt7CiAgICAgICAgICBuYW1lOiAncmlwcGxlJywKICAgICAgICAgIHZhbHVlOiAoX3RoaXMkZXZlbnRSaXBwbGUyID0gdGhpcy5ldmVudFJpcHBsZSkgIT0gbnVsbCA/IF90aGlzJGV2ZW50UmlwcGxlMiA6IHRydWUKICAgICAgICB9XSwKICAgICAgICBvbjogdGhpcy5nZXREZWZhdWx0TW91c2VFdmVudEhhbmRsZXJzKCc6bW9yZScsIGZ1bmN0aW9uIChuYXRpdmVFdmVudCkgewogICAgICAgICAgcmV0dXJuIF9vYmplY3RTcHJlYWQoewogICAgICAgICAgICBuYXRpdmVFdmVudDogbmF0aXZlRXZlbnQKICAgICAgICAgIH0sIGRheSk7CiAgICAgICAgfSksCiAgICAgICAgc3R5bGU6IHsKICAgICAgICAgIGRpc3BsYXk6ICdub25lJywKICAgICAgICAgIGhlaWdodDogIiIuY29uY2F0KGV2ZW50SGVpZ2h0LCAicHgiKSwKICAgICAgICAgICdtYXJnaW4tYm90dG9tJzogIiIuY29uY2F0KGV2ZW50TWFyZ2luQm90dG9tLCAicHgiKQogICAgICAgIH0sCiAgICAgICAgcmVmOiAnZXZlbnRzJywKICAgICAgICByZWZJbkZvcjogdHJ1ZQogICAgICB9KTsKICAgIH0sCiAgICBnZXRWaXNpYmxlRXZlbnRzOiBmdW5jdGlvbiBnZXRWaXNpYmxlRXZlbnRzKCkgewogICAgICB2YXIgc3RhcnQgPSBnZXREYXlJZGVudGlmaWVyKHRoaXMuZGF5c1swXSk7CiAgICAgIHZhciBlbmQgPSBnZXREYXlJZGVudGlmaWVyKHRoaXMuZGF5c1t0aGlzLmRheXMubGVuZ3RoIC0gMV0pOwogICAgICByZXR1cm4gdGhpcy5wYXJzZWRFdmVudHMuZmlsdGVyKGZ1bmN0aW9uIChldmVudCkgewogICAgICAgIHJldHVybiBpc0V2ZW50T3ZlcmxhcHBpbmcoZXZlbnQsIHN0YXJ0LCBlbmQpOwogICAgICB9KTsKICAgIH0sCiAgICBpc0V2ZW50Rm9yQ2F0ZWdvcnk6IGZ1bmN0aW9uIGlzRXZlbnRGb3JDYXRlZ29yeShldmVudCwgY2F0ZWdvcnkpIHsKICAgICAgcmV0dXJuICF0aGlzLmNhdGVnb3J5TW9kZSB8fCBfdHlwZW9mKGNhdGVnb3J5KSA9PT0gJ29iamVjdCcgJiYgY2F0ZWdvcnkuY2F0ZWdvcnlOYW1lICYmIGNhdGVnb3J5LmNhdGVnb3J5TmFtZSA9PT0gZXZlbnQuY2F0ZWdvcnkgfHwgdHlwZW9mIGV2ZW50LmNhdGVnb3J5ID09PSAnc3RyaW5nJyAmJiBjYXRlZ29yeSA9PT0gZXZlbnQuY2F0ZWdvcnkgfHwgdHlwZW9mIGV2ZW50LmNhdGVnb3J5ICE9PSAnc3RyaW5nJyAmJiBjYXRlZ29yeSA9PT0gbnVsbDsKICAgIH0sCiAgICBnZXRFdmVudHNGb3JEYXk6IGZ1bmN0aW9uIGdldEV2ZW50c0ZvckRheShkYXkpIHsKICAgICAgdmFyIGlkZW50aWZpZXIgPSBnZXREYXlJZGVudGlmaWVyKGRheSk7CiAgICAgIHZhciBmaXJzdFdlZWtkYXkgPSB0aGlzLmV2ZW50V2Vla2RheXNbMF07CiAgICAgIHJldHVybiB0aGlzLnBhcnNlZEV2ZW50cy5maWx0ZXIoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuIGlzRXZlbnRTdGFydChldmVudCwgZGF5LCBpZGVudGlmaWVyLCBmaXJzdFdlZWtkYXkpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRFdmVudHNGb3JEYXlBbGw6IGZ1bmN0aW9uIGdldEV2ZW50c0ZvckRheUFsbChkYXkpIHsKICAgICAgdmFyIF90aGlzNiA9IHRoaXM7CgogICAgICB2YXIgaWRlbnRpZmllciA9IGdldERheUlkZW50aWZpZXIoZGF5KTsKICAgICAgdmFyIGZpcnN0V2Vla2RheSA9IHRoaXMuZXZlbnRXZWVrZGF5c1swXTsKICAgICAgcmV0dXJuIHRoaXMucGFyc2VkRXZlbnRzLmZpbHRlcihmdW5jdGlvbiAoZXZlbnQpIHsKICAgICAgICByZXR1cm4gZXZlbnQuYWxsRGF5ICYmIChfdGhpczYuY2F0ZWdvcnlNb2RlID8gaXNFdmVudE9uKGV2ZW50LCBpZGVudGlmaWVyKSA6IGlzRXZlbnRTdGFydChldmVudCwgZGF5LCBpZGVudGlmaWVyLCBmaXJzdFdlZWtkYXkpKSAmJiBfdGhpczYuaXNFdmVudEZvckNhdGVnb3J5KGV2ZW50LCBkYXkuY2F0ZWdvcnkpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRFdmVudHNGb3JEYXlUaW1lZDogZnVuY3Rpb24gZ2V0RXZlbnRzRm9yRGF5VGltZWQoZGF5KSB7CiAgICAgIHZhciBfdGhpczcgPSB0aGlzOwoKICAgICAgdmFyIGlkZW50aWZpZXIgPSBnZXREYXlJZGVudGlmaWVyKGRheSk7CiAgICAgIHJldHVybiB0aGlzLnBhcnNlZEV2ZW50cy5maWx0ZXIoZnVuY3Rpb24gKGV2ZW50KSB7CiAgICAgICAgcmV0dXJuICFldmVudC5hbGxEYXkgJiYgaXNFdmVudE9uKGV2ZW50LCBpZGVudGlmaWVyKSAmJiBfdGhpczcuaXNFdmVudEZvckNhdGVnb3J5KGV2ZW50LCBkYXkuY2F0ZWdvcnkpOwogICAgICB9KTsKICAgIH0sCiAgICBnZXRTY29wZWRTbG90czogZnVuY3Rpb24gZ2V0U2NvcGVkU2xvdHMoKSB7CiAgICAgIHZhciBfdGhpczggPSB0aGlzOwoKICAgICAgaWYgKHRoaXMubm9FdmVudHMpIHsKICAgICAgICByZXR1cm4gX29iamVjdFNwcmVhZCh7fSwgdGhpcy4kc2NvcGVkU2xvdHMpOwogICAgICB9CgogICAgICB2YXIgbW9kZSA9IHRoaXMuZXZlbnRNb2RlRnVuY3Rpb24odGhpcy5wYXJzZWRFdmVudHMsIHRoaXMuZXZlbnRXZWVrZGF5c1swXSwgdGhpcy5wYXJzZWRFdmVudE92ZXJsYXBUaHJlc2hvbGQpOwoKICAgICAgdmFyIGlzTm9kZSA9IGZ1bmN0aW9uIGlzTm9kZShpbnB1dCkgewogICAgICAgIHJldHVybiAhIWlucHV0OwogICAgICB9OwoKICAgICAgdmFyIGdldFNsb3RDaGlsZHJlbiA9IGZ1bmN0aW9uIGdldFNsb3RDaGlsZHJlbihkYXksIGdldHRlciwgbWFwcGVyLCB0aW1lZCkgewogICAgICAgIHZhciBldmVudHMgPSBnZXR0ZXIoZGF5KTsKICAgICAgICB2YXIgdmlzdWFscyA9IG1vZGUoZGF5LCBldmVudHMsIHRpbWVkLCBfdGhpczguY2F0ZWdvcnlNb2RlKTsKCiAgICAgICAgaWYgKHRpbWVkKSB7CiAgICAgICAgICByZXR1cm4gdmlzdWFscy5tYXAoZnVuY3Rpb24gKHZpc3VhbCkgewogICAgICAgICAgICByZXR1cm4gbWFwcGVyKHZpc3VhbCwgZGF5KTsKICAgICAgICAgIH0pLmZpbHRlcihpc05vZGUpOwogICAgICAgIH0KCiAgICAgICAgdmFyIGNoaWxkcmVuID0gW107CiAgICAgICAgdmlzdWFscy5mb3JFYWNoKGZ1bmN0aW9uICh2aXN1YWwsIGluZGV4KSB7CiAgICAgICAgICB3aGlsZSAoY2hpbGRyZW4ubGVuZ3RoIDwgdmlzdWFsLmNvbHVtbikgewogICAgICAgICAgICBjaGlsZHJlbi5wdXNoKF90aGlzOC5nZW5QbGFjZWhvbGRlcihkYXkpKTsKICAgICAgICAgIH0KCiAgICAgICAgICB2YXIgbWFwcGVkID0gbWFwcGVyKHZpc3VhbCwgZGF5KTsKCiAgICAgICAgICBpZiAobWFwcGVkKSB7CiAgICAgICAgICAgIGNoaWxkcmVuLnB1c2gobWFwcGVkKTsKICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgICByZXR1cm4gY2hpbGRyZW47CiAgICAgIH07CgogICAgICB2YXIgc2xvdHMgPSB0aGlzLiRzY29wZWRTbG90czsKICAgICAgdmFyIHNsb3REYXkgPSBzbG90cy5kYXk7CiAgICAgIHZhciBzbG90RGF5SGVhZGVyID0gc2xvdHNbJ2RheS1oZWFkZXInXTsKICAgICAgdmFyIHNsb3REYXlCb2R5ID0gc2xvdHNbJ2RheS1ib2R5J107CiAgICAgIHJldHVybiBfb2JqZWN0U3ByZWFkKF9vYmplY3RTcHJlYWQoe30sIHNsb3RzKSwge30sIHsKICAgICAgICBkYXk6IGZ1bmN0aW9uIGRheShfZGF5KSB7CiAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBnZXRTbG90Q2hpbGRyZW4oX2RheSwgX3RoaXM4LmdldEV2ZW50c0ZvckRheSwgX3RoaXM4LmdlbkRheUV2ZW50LCBmYWxzZSk7CgogICAgICAgICAgaWYgKGNoaWxkcmVuICYmIGNoaWxkcmVuLmxlbmd0aCA+IDAgJiYgX3RoaXM4LmV2ZW50TW9yZSkgewogICAgICAgICAgICBjaGlsZHJlbi5wdXNoKF90aGlzOC5nZW5Nb3JlKF9kYXkpKTsKICAgICAgICAgIH0KCiAgICAgICAgICBpZiAoc2xvdERheSkgewogICAgICAgICAgICB2YXIgc2xvdCA9IHNsb3REYXkoX2RheSk7CgogICAgICAgICAgICBpZiAoc2xvdCkgewogICAgICAgICAgICAgIGNoaWxkcmVuID0gY2hpbGRyZW4gPyBjaGlsZHJlbi5jb25jYXQoc2xvdCkgOiBzbG90OwogICAgICAgICAgICB9CiAgICAgICAgICB9CgogICAgICAgICAgcmV0dXJuIGNoaWxkcmVuOwogICAgICAgIH0sCiAgICAgICAgJ2RheS1oZWFkZXInOiBmdW5jdGlvbiBkYXlIZWFkZXIoZGF5KSB7CiAgICAgICAgICB2YXIgY2hpbGRyZW4gPSBnZXRTbG90Q2hpbGRyZW4oZGF5LCBfdGhpczguZ2V0RXZlbnRzRm9yRGF5QWxsLCBfdGhpczguZ2VuRGF5RXZlbnQsIGZhbHNlKTsKCiAgICAgICAgICBpZiAoc2xvdERheUhlYWRlcikgewogICAgICAgICAgICB2YXIgc2xvdCA9IHNsb3REYXlIZWFkZXIoZGF5KTsKCiAgICAgICAgICAgIGlmIChzbG90KSB7CiAgICAgICAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlbiA/IGNoaWxkcmVuLmNvbmNhdChzbG90KSA6IHNsb3Q7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gY2hpbGRyZW47CiAgICAgICAgfSwKICAgICAgICAnZGF5LWJvZHknOiBmdW5jdGlvbiBkYXlCb2R5KGRheSkgewogICAgICAgICAgdmFyIGV2ZW50cyA9IGdldFNsb3RDaGlsZHJlbihkYXksIF90aGlzOC5nZXRFdmVudHNGb3JEYXlUaW1lZCwgX3RoaXM4LmdlblRpbWVkRXZlbnQsIHRydWUpOwogICAgICAgICAgdmFyIGNoaWxkcmVuID0gW190aGlzOC4kY3JlYXRlRWxlbWVudCgnZGl2JywgewogICAgICAgICAgICBzdGF0aWNDbGFzczogJ3YtZXZlbnQtdGltZWQtY29udGFpbmVyJwogICAgICAgICAgfSwgZXZlbnRzKV07CgogICAgICAgICAgaWYgKHNsb3REYXlCb2R5KSB7CiAgICAgICAgICAgIHZhciBzbG90ID0gc2xvdERheUJvZHkoZGF5KTsKCiAgICAgICAgICAgIGlmIChzbG90KSB7CiAgICAgICAgICAgICAgY2hpbGRyZW4gPSBjaGlsZHJlbi5jb25jYXQoc2xvdCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KCiAgICAgICAgICByZXR1cm4gY2hpbGRyZW47CiAgICAgICAgfQogICAgICB9KTsKICAgIH0KICB9Cn0pOw=="},{"version":3,"mappings":";;;;;;;;;;AAAA;AACA,OAAO,uEAAP,C,CAKA;;AACA,OAAOA,MAAP,MAAmB,4BAAnB,C,CAEA;;AACA,OAAOC,YAAP,MAAyB,iBAAzB,C,CAEA;;AACA,SAASC,UAAT,QAA2B,uBAA3B,C,CAEA;;AACA,OAAOC,KAAP,MAAkB,eAAlB;AACA,SACEC,yBADF,QAEO,UAFP;AAGA,SACEC,gBADF,EACoBC,WADpB,QAEO,mBAFP;AAGA,SACEC,UADF,IACEA,WADF,EAEEC,YAFF,EAGEC,SAHF,EAIEC,kBAJF,EAKEC,eALF,QAMO,gBANP;AAiDA,IAAMC,UAAU,GAAG,GAAnB;AACA,IAAMC,WAAW,GAAG,EAApB;AACA,IAAMC,cAAc,GAAG,IAAvB;AAEA;;AACA,eAAeb,YAAY,CAACc,MAAb,CAAoB;AACjCC,MAAI,EAAE,sBAD2B;AAGjCC,YAAU,EAAE;AACVjB;AADU,GAHqB;AAOjCG,OAAK,gDACAA,KAAK,CAACe,MADN,GAEAf,KAAK,CAACgB,QAFN,GAGAhB,KAAK,CAACiB,QAHN,CAP4B;AAajCC,UAAQ,EAAE;AACRC,YADQ,sBACA;AACN,aAAO,KAAKJ,MAAL,CAAYK,MAAZ,KAAuB,CAA9B;AAFM;AAIRC,gBAJQ,0BAII;AACV,aAAO,KAAKN,MAAL,CAAYO,GAAZ,CAAgB,KAAKlB,UAArB,CAAP;AALM;AAORmB,+BAPQ,yCAOmB;AACzB,aAAOC,QAAQ,CAAC,KAAKC,qBAAN,CAAf;AARM;AAURC,sBAVQ,gCAUU;AAAA;;AAChB,aAAO,OAAO,KAAKC,UAAZ,KAA2B,UAA3B,GACH,KAAKA,UADF,GAEH,eAAK;AAAA,eAAI,CAAC,CAACC,KAAK,CAAC,MAAKD,UAAN,CAAX;AAAA,OAFT;AAXM;AAeRE,yBAfQ,mCAea;AAAA;;AACnB,aAAO,OAAO,KAAKC,aAAZ,KAA8B,UAA9B,GACH,KAAKA,aADF,GAEH,eAAK;AAAA,eAAIF,KAAK,CAAC,OAAKE,aAAN,CAAT;AAAA,OAFT;AAhBM;AAoBRC,0BApBQ,oCAoBc;AAAA;;AACpB,aAAO,OAAO,KAAKC,cAAZ,KAA+B,UAA/B,GACH,KAAKA,cADF,GAEH;AAAA,eAAM,OAAKA,cAAX;AAAA,OAFJ;AArBM;AAyBRC,qBAzBQ,+BAyBS;AAAA;;AACf,aAAO,OAAO,KAAKC,SAAZ,KAA0B,UAA1B,GACH,KAAKA,SADF,GAEH,UAACN,KAAD,EAAQO,UAAR;AAAA,eAAuBpC,UAAU,CAAC6B,KAAK,CAACQ,KAAN,CAAY,OAAKF,SAAjB,KAAmD,EAApD,CAAjC;AAAA,OAFJ;AA1BM;AA8BRG,qBA9BQ,+BA8BS;AACf,aAAO,OAAO,KAAKC,gBAAZ,KAAiC,UAAjC,GACH,KAAKA,gBADF,GAEHrC,yBAAyB,CAAC,KAAKqC,gBAAN,CAF7B;AA/BM;AAmCRC,iBAnCQ,2BAmCK;AACX,aAAO,KAAKC,cAAZ;AApCM;AAsCRC,gBAtCQ,0BAsCI;AACV,aAAO,KAAKC,IAAL,KAAc,UAArB;AACD;AAxCO,GAbuB;AAwDjCC,SAAO,EAAE;AACPC,sBADO,8BACaC,CADb,EAC6B;AAClC,aAAO,OAAO,KAAKC,UAAZ,KAA2B,UAA3B,GACH,KAAKA,UAAL,CAAgBD,CAAhB,CADG,GAEHA,CAAC,CAACE,KAAF,IAAW,KAAKD,UAFpB;AAFK;AAMP1C,cANO,sBAMKgC,KANL,EAMoC;AAAA,UAATY,KAAS,uEAAD,CAAC;AACzC,aAAO5C,WAAU,CACfgC,KADe,EAEfY,KAFe,EAGf,KAAKC,UAHU,EAIf,KAAKC,QAJU,EAKf,KAAKxB,kBAAL,CAAwBU,KAAxB,CALe,EAMf,KAAKK,YAAL,GAAoB,KAAKZ,qBAAL,CAA2BO,KAA3B,CAApB,GAAwD,KANzC,CAAjB;AAPK;AAgBPe,cAhBO,sBAgBKC,QAhBL,EAgBkCC,IAhBlC,EAgB+C;AACpD,UAAMC,SAAS,GAAG,KAAKC,YAAL,CAAkB;AAClCC,gBAAQ,EAAE,KADwB;AAElCC,YAAI,EAAE,SAF4B;AAGlCC,cAAM,EAAEN,QAAQ,CAACM,MAAT,GAAkB,CAAlB,GAAsB,SAAtB,GAAkCC;AAHR,OAAlB,CAAlB;AAMA,aAAOL,SAAS,CAACF,QAAD,EAAW,IAAX,CAAhB;AAvBK;AAyBPQ,yBAzBO,mCAyBc;AACnB,UAAI,KAAKzC,QAAL,IAAiB,CAAC,KAAK0C,SAA3B,EAAsC;AACpC;AACD;;AAED,UAAMC,WAAW,GAAG,KAAKA,WAAzB;AACA,UAAMC,SAAS,GAAG,KAAKC,YAAL,EAAlB;;AAEA,WAAK,IAAMC,IAAX,IAAmBF,SAAnB,EAA8B;AAC5B,8BAAiCA,SAAS,CAACE,IAAD,CAA1C;AAAA,YAAQC,MAAR,mBAAQA,MAAR;AAAA,YAAgBnD,MAAhB,mBAAgBA,MAAhB;AAAA,YAAwBoD,IAAxB,mBAAwBA,IAAxB;;AACA,YAAI,CAACA,IAAL,EAAW;AACT;AACD;;AAED,YAAMC,YAAY,GAAGF,MAAM,CAACG,qBAAP,EAArB;AACA,YAAMC,IAAI,GAAGvD,MAAM,CAACK,MAAP,GAAgB,CAA7B;AACA,YAAMmD,YAAY,GAAGxD,MAAM,CAACO,GAAP,CAAW,eAAK;AAAA,iBAAK;AACxCM,iBADwC,EACxCA,KADwC;AAExC4C,kBAAM,EAAE5C,KAAK,CAACyC,qBAAN,GAA8BG;AAFE,WAAL;AAAA,SAAhB,EAGjBC,IAHiB,CAGZ,UAACC,CAAD,EAAIC,CAAJ;AAAA,iBAAUD,CAAC,CAACF,MAAF,GAAWG,CAAC,CAACH,MAAvB;AAAA,SAHY,CAArB;AAIA,YAAII,MAAM,GAAG,CAAb;;AAEA,aAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAIP,IAArB,EAA2BO,CAAC,EAA5B,EAAgC;AAC9B,cAAML,MAAM,GAAGD,YAAY,CAACM,CAAD,CAAZ,CAAgBL,MAA/B;AACA,cAAMM,IAAI,GAAGD,CAAC,KAAKP,IAAN,GACRE,MAAM,GAAGJ,YAAY,CAACI,MADd,GAERA,MAAM,GAAGV,WAAT,GAAuBM,YAAY,CAACI,MAFzC;;AAIA,cAAIM,IAAJ,EAAU;AACRP,wBAAY,CAACM,CAAD,CAAZ,CAAgBjD,KAAhB,CAAsBmD,KAAtB,CAA4BC,OAA5B,GAAsC,MAAtC;AACAJ,kBAAM;AACP;AACF;;AAED,YAAIA,MAAJ,EAAY;AACVT,cAAI,CAACY,KAAL,CAAWC,OAAX,GAAqB,EAArB;AACAb,cAAI,CAACc,SAAL,GAAiB,KAAKC,QAAL,CAAcC,IAAd,CAAmBC,CAAnB,CAAqB,KAAKC,aAA1B,EAAyCT,MAAzC,CAAjB;AAFF,eAGO;AACLT,cAAI,CAACY,KAAL,CAAWC,OAAX,GAAqB,MAArB;AACD;AACF;AAjEI;AAmEPhB,gBAnEO,0BAmEK;AACV,UAAMD,SAAS,GAAoB,EAAnC;AACA,UAAMuB,QAAQ,GAAG,KAAKC,KAAL,CAAWxE,MAA5B;;AAEA,UAAI,CAACuE,QAAD,IAAa,CAACA,QAAQ,CAACE,OAA3B,EAAoC;AAClC,eAAOzB,SAAP;AACD;;AAEDuB,cAAQ,CAACE,OAAT,CAAiB,YAAE,EAAG;AACpB,YAAMvB,IAAI,GAAGwB,EAAE,CAACC,YAAH,CAAgB,WAAhB,CAAb;;AACA,YAAID,EAAE,CAACE,aAAH,IAAoB1B,IAAxB,EAA8B;AAC5B,cAAI,EAAEA,IAAI,IAAIF,SAAV,CAAJ,EAA0B;AACxBA,qBAAS,CAACE,IAAD,CAAT,GAAkB;AAChBC,oBAAM,EAAEuB,EAAE,CAACE,aADK;AAEhBxB,kBAAI,EAAE,IAFU;AAGhBpD,oBAAM,EAAE;AAHQ,aAAlB;AAKD;;AACD,cAAI0E,EAAE,CAACC,YAAH,CAAgB,WAAhB,CAAJ,EAAkC;AAChC3B,qBAAS,CAACE,IAAD,CAAT,CAAgBE,IAAhB,GAAuBsB,EAAvB;AADF,iBAEO;AACL1B,qBAAS,CAACE,IAAD,CAAT,CAAgBlD,MAAhB,CAAuB6E,IAAvB,CAA4BH,EAA5B;AACAA,cAAE,CAACV,KAAH,CAASC,OAAT,GAAmB,EAAnB;AACD;AACF;AAhBH;AAmBA,aAAOjB,SAAP;AA9FK;AAgGP8B,eAhGO,6BAgGsCC,GAhGtC,EAgG+D;AAAA,UAAvDlE,KAAuD,QAAvDA,KAAuD;AACpE,UAAMkC,WAAW,GAAG,KAAKA,WAAzB;AACA,UAAMiC,iBAAiB,GAAG,KAAKA,iBAA/B;AACA,UAAMC,aAAa,GAAG9F,gBAAgB,CAAC4F,GAAD,CAAtC;AACA,UAAMG,IAAI,GAAGH,GAAG,CAACG,IAAjB;AACA,UAAMC,KAAK,GAAGF,aAAa,KAAKpE,KAAK,CAACuE,eAAtC;AACA,UAAIC,GAAG,GAAGJ,aAAa,KAAKpE,KAAK,CAACyE,aAAlC;AACA,UAAIC,KAAK,GAAG5F,WAAZ;;AAEA,UAAI,CAAC,KAAK+B,YAAV,EAAwB;AACtB,aAAK,IAAIoC,CAAC,GAAGiB,GAAG,CAAC9C,KAAJ,GAAY,CAAzB,EAA4B6B,CAAC,GAAGoB,IAAI,CAAC7E,MAArC,EAA6CyD,CAAC,EAA9C,EAAkD;AAChD,cAAM0B,iBAAiB,GAAGrG,gBAAgB,CAAC+F,IAAI,CAACpB,CAAD,CAAL,CAA1C;;AACA,cAAIjD,KAAK,CAACyE,aAAN,IAAuBE,iBAA3B,EAA8C;AAC5CD,iBAAK,IAAI7F,UAAT;AACA2F,eAAG,GAAGA,GAAG,IAAIG,iBAAiB,KAAK3E,KAAK,CAACyE,aAAzC;AAFF,iBAGO;AACLD,eAAG,GAAG,IAAN;AACA;AACD;AACF;AACF;;AACD,UAAMI,KAAK,GAAG;AAAEC,mBAAW,EAAE7E,KAAf;AAAsBkE,WAAtB,EAAsBA,GAAtB;AAA2BI,aAA3B,EAA2BA,KAA3B;AAAkCE,WAAlC,EAAkCA,GAAlC;AAAuCM,aAAK,EAAE;AAA9C,OAAd;AAEA,aAAO,KAAKC,QAAL,CAAc/E,KAAd,EAAqB4E,KAArB,EAA4B,KAA5B,EAAmC;AACxCI,mBAAW,EAAE,SAD2B;AAExC,iBAAO;AACL,2BAAiBV,KADZ;AAEL,yBAAeE;AAFV,SAFiC;AAMxCrB,aAAK,EAAE;AACL8B,gBAAM,YAAK/C,WAAL,OADD;AAELwC,eAAK,YAAKA,KAAL,MAFA;AAGL,qCAAoBP,iBAApB;AAHK,SANiC;AAWxCe,aAAK,EAAE;AACL,uBAAahB,GAAG,CAAC7B;AADZ,SAXiC;AAcxC8C,WAAG,EAAEnF,KAAK,CAACoB,KAd6B;AAexCgE,WAAG,EAAE,QAfmC;AAgBxCC,gBAAQ,EAAE;AAhB8B,OAAnC,CAAP;AAvHK;AA0IPC,iBA1IO,gCA0IqDpB,GA1IrD,EA0IkF;AAAA,UAAxElE,KAAwE,SAAxEA,KAAwE;AAAA,UAAjEuF,IAAiE,SAAjEA,IAAiE;AAAA,UAA3Db,KAA2D,SAA3DA,KAA2D;;AACvF,UAAIR,GAAG,CAACsB,SAAJ,CAAcxF,KAAK,CAACwE,GAApB,IAA2B,CAA3B,IAAgCN,GAAG,CAACsB,SAAJ,CAAcxF,KAAK,CAACsE,KAApB,KAA8B,CAA9D,IAAmE1F,eAAe,CAACoB,KAAD,EAAQkE,GAAR,CAAtF,EAAoG;AAClG,eAAO,KAAP;AACD;;AAED,UAAME,aAAa,GAAG9F,gBAAgB,CAAC4F,GAAD,CAAtC;AACA,UAAMI,KAAK,GAAGtE,KAAK,CAACuE,eAAN,IAAyBH,aAAvC;AACA,UAAMI,GAAG,GAAGxE,KAAK,CAACyE,aAAN,GAAsBL,aAAlC;AACA,UAAMqB,GAAG,GAAGnB,KAAK,GAAGJ,GAAG,CAACwB,OAAJ,CAAY1F,KAAK,CAACsE,KAAlB,CAAH,GAA8B,CAA/C;AACA,UAAM1B,MAAM,GAAG4B,GAAG,GAAGN,GAAG,CAACwB,OAAJ,CAAY3G,cAAZ,CAAH,GAAiCmF,GAAG,CAACwB,OAAJ,CAAY1F,KAAK,CAACwE,GAAlB,CAAnD;AACA,UAAMS,MAAM,GAAGU,IAAI,CAACC,GAAL,CAAS,KAAK1D,WAAd,EAA2BU,MAAM,GAAG6C,GAApC,CAAf;AACA,UAAMb,KAAK,GAAG;AAAEC,mBAAW,EAAE7E,KAAf;AAAsBkE,WAAtB,EAAsBA,GAAtB;AAA2BI,aAA3B,EAA2BA,KAA3B;AAAkCE,WAAlC,EAAkCA,GAAlC;AAAuCM,aAAK,EAAE;AAA9C,OAAd;AAEA,aAAO,KAAKC,QAAL,CAAc/E,KAAd,EAAqB4E,KAArB,EAA4B,IAA5B,EAAkC;AACvCI,mBAAW,EAAE,eAD0B;AAEvC7B,aAAK,EAAE;AACLsC,aAAG,YAAKA,GAAL,OADE;AAELR,gBAAM,YAAKA,MAAL,OAFD;AAGLM,cAAI,YAAKA,IAAL,MAHC;AAILb,eAAK,YAAKA,KAAL;AAJA;AAFgC,OAAlC,CAAP;AAvJK;AAiKPK,YAjKO,oBAiKG/E,KAjKH,EAiK+B6F,UAjK/B,EAiK6DtF,UAjK7D,EAiKkFuF,IAjKlF,EAiKiG;AAAA;;AAAA;;AACtG,UAAMC,IAAI,GAAG,KAAKC,YAAL,CAAkBhG,KAA/B;AACA,UAAMiG,IAAI,GAAG,KAAK9F,sBAAL,CAA4BH,KAAK,CAACQ,KAAlC,CAAb;AACA,UAAM0F,UAAU,GAAG,KAAKlF,kBAAL,CAAwBhB,KAAK,CAACQ,KAA9B,CAAnB;AACA,UAAM2F,YAAY,GAAGnG,KAAK,CAACsE,KAAN,CAAYzC,IAAZ,GAAmB,EAAnB,IAAyB7B,KAAK,CAACwE,GAAN,CAAU3C,IAAV,IAAkB,EAAhE;AACA,UAAMuE,QAAQ,GAAG7H,WAAW,CAACyB,KAAK,CAACsE,KAAP,EAActE,KAAK,CAACwE,GAApB,CAAX,IAAuC,KAAK7E,2BAA7D;AACA,UAAM4B,UAAU,GAAG,KAAKA,UAAxB;;AACA,UAAM8E,WAAW,GAAG,SAAdA,WAAc;AAAA,eAAM9E,UAAU,CAACvB,KAAK,CAACsE,KAAP,EAAc6B,YAAd,CAAV,GAAwC,KAAxC,GAAgD5E,UAAU,CAACvB,KAAK,CAACwE,GAAP,EAAY,IAAZ,CAAhE;AAAA,OAApB;;AACA,UAAM8B,YAAY,GAAG,SAAfA,YAAe,GAAK;AACxB,YAAMrH,IAAI,GAAG,OAAKoB,iBAAL,CAAuBL,KAAvB,EAA8BO,UAA9B,CAAb;;AACA,YAAIP,KAAK,CAACsE,KAAN,CAAYiC,OAAhB,EAAyB;AACvB,cAAMC,iBAAiB,GAAG,iBAA1B;;AACA,cAAIjG,UAAJ,EAAgB;AACd,gBAAMkG,IAAI,GAAGJ,WAAW,EAAxB;AACA,gBAAMK,SAAS,GAAGN,QAAQ,GAAG,IAAH,GAAU,MAApC;AAEA,2CAAuBI,iBAAvB,wBAAqDvH,IAArD,sBAAqEyH,SAArE,SAAiFD,IAAjF;AAJF,iBAKO;AACL,gBAAMA,KAAI,GAAGlF,UAAU,CAACvB,KAAK,CAACsE,KAAP,EAAc,IAAd,CAAvB;;AAEA,2CAAuBkC,iBAAvB,wBAAqDC,KAArD,uBAAsExH,IAAtE;AACD;AACF;;AAED,eAAOA,IAAP;AAhBF;;AAmBA,UAAM2F,KAAK,mCACNiB,UADM;AAET7F,aAAK,EAAEA,KAAK,CAACQ,KAFJ;AAGTmG,eAAO,EAAEd,UAAU,CAAC3B,GAAX,CAAeyC,OAHf;AAITP,gBAJY,EAIZA,QAJS;AAKTD,oBALY,EAKZA,YALS;AAMT5E,kBANY,EAMZA,UANS;AAOT8E,mBAPY,EAOZA,WAPS;AAQTC;AARS,QAAX;;AAWA,aAAO,KAAKM,cAAL,CAAoB,KAApB,EACL,KAAKC,YAAL,CAAkBZ,IAAlB,EACE,KAAKa,kBAAL,CAAwBZ,UAAxB;AACEa,UAAE,EAAE,KAAKC,4BAAL,CAAkC,QAAlC,EAA4C,qBAAW;AAAA,iDAAUpC,KAAV;AAAiBqC;AAAjB;AAAA,SAAvD,CADN;AAEE/H,kBAAU,EAAE,CAAC;AACXD,cAAI,EAAE,QADK;AAEXiI,eAAK,uBAAE,KAAKC,WAAP,gCAAsB;AAFhB,SAAD;AAFd,SAMKrB,IANL,EADF,CADK,EAUFC,IAAI,GACHA,IAAI,CAACnB,KAAD,CADD,GAEH,CAAC,KAAKwC,OAAL,CAAad,YAAb,CAAD,CAZC,CAAP;AAvMK;AAsNPc,WAtNO,mBAsNEd,YAtNF,EAsN4B;AACjC,aAAO,KAAKM,cAAL,CAAoB,KAApB,EAA2B;AAChC5B,mBAAW,EAAE,MADmB;AAEhCqC,gBAAQ,EAAE;AACRhE,mBAAS,EAAEiD,YAAY;AADf;AAFsB,OAA3B,CAAP;AAvNK;AA8NPgB,kBA9NO,0BA8NSpD,GA9NT,EA8N+B;AACpC,UAAMe,MAAM,GAAG,KAAK/C,WAAL,GAAmB,KAAKiC,iBAAvC;AAEA,aAAO,KAAKyC,cAAL,CAAoB,KAApB,EAA2B;AAChCzD,aAAK,EAAE;AACL8B,gBAAM,YAAKA,MAAL;AADD,SADyB;AAIhCC,aAAK,EAAE;AACL,uBAAahB,GAAG,CAAC7B;AADZ,SAJyB;AAOhC+C,WAAG,EAAE,QAP2B;AAQhCC,gBAAQ,EAAE;AARsB,OAA3B,CAAP;AAjOK;AA4OPkC,WA5OO,mBA4OErD,GA5OF,EA4O2B;AAAA;;AAChC,UAAMhC,WAAW,GAAG,KAAKA,WAAzB;AACA,UAAMiC,iBAAiB,GAAG,KAAKA,iBAA/B;AAEA,aAAO,KAAKyC,cAAL,CAAoB,KAApB,EAA2B;AAChC5B,mBAAW,EAAE,mBADmB;AAEhC,iBAAO;AACL,uBAAad,GAAG,CAACyC;AADZ,SAFyB;AAKhCzB,aAAK,EAAE;AACL,uBAAahB,GAAG,CAAC7B,IADZ;AAEL,uBAAa;AAFR,SALyB;AAShCnD,kBAAU,EAAE,CAAC;AACXD,cAAI,EAAE,QADK;AAEXiI,eAAK,wBAAE,KAAKC,WAAP,iCAAsB;AAFhB,SAAD,CAToB;AAahCJ,UAAE,EAAE,KAAKC,4BAAL,CAAkC,OAAlC,EAA2C,qBAAW,EAAG;AAC3D;AAASC,uBAAF,EAAEA;AAAT,aAAyB/C,GAAzB;AADE,UAb4B;AAiBhCf,aAAK,EAAE;AACLC,iBAAO,EAAE,MADJ;AAEL6B,gBAAM,YAAK/C,WAAL,OAFD;AAGL,qCAAoBiC,iBAApB;AAHK,SAjByB;AAsBhCiB,WAAG,EAAE,QAtB2B;AAuBhCC,gBAAQ,EAAE;AAvBsB,OAA3B,CAAP;AAhPK;AA0QPmC,oBA1QO,8BA0QS;AACd,UAAMlD,KAAK,GAAGhG,gBAAgB,CAAC,KAAKmJ,IAAL,CAAU,CAAV,CAAD,CAA9B;AACA,UAAMjD,GAAG,GAAGlG,gBAAgB,CAAC,KAAKmJ,IAAL,CAAU,KAAKA,IAAL,CAAUjI,MAAV,GAAmB,CAA7B,CAAD,CAA5B;AAEA,aAAO,KAAKC,YAAL,CAAkBiI,MAAlB,CACL,eAAK;AAAA,eAAI/I,kBAAkB,CAACqB,KAAD,EAAQsE,KAAR,EAAeE,GAAf,CAAtB;AAAA,OADA,CAAP;AA9QK;AAkRPmD,sBAlRO,8BAkRa3H,KAlRb,EAkRyCX,QAlRzC,EAkRmE;AACxE,aAAO,CAAC,KAAKwB,YAAN,IACJ,QAAOxB,QAAP,MAAoB,QAApB,IAAgCA,QAAQ,CAACuI,YAAzC,IACDvI,QAAQ,CAACuI,YAAT,KAA0B5H,KAAK,CAACX,QAF3B,IAGJ,OAAOW,KAAK,CAACX,QAAb,KAA0B,QAA1B,IAAsCA,QAAQ,KAAKW,KAAK,CAACX,QAHrD,IAIJ,OAAOW,KAAK,CAACX,QAAb,KAA0B,QAA1B,IAAsCA,QAAQ,KAAK,IAJtD;AAnRK;AAyRPwI,mBAzRO,2BAyRU3D,GAzRV,EAyRmC;AACxC,UAAM4D,UAAU,GAAGxJ,gBAAgB,CAAC4F,GAAD,CAAnC;AACA,UAAM6D,YAAY,GAAG,KAAKpH,aAAL,CAAmB,CAAnB,CAArB;AAEA,aAAO,KAAKlB,YAAL,CAAkBiI,MAAlB,CACL,eAAK;AAAA,eAAIjJ,YAAY,CAACuB,KAAD,EAAQkE,GAAR,EAAa4D,UAAb,EAAyBC,YAAzB,CAAhB;AAAA,OADA,CAAP;AA7RK;AAiSPC,sBAjSO,8BAiSa9D,GAjSb,EAiSsC;AAAA;;AAC3C,UAAM4D,UAAU,GAAGxJ,gBAAgB,CAAC4F,GAAD,CAAnC;AACA,UAAM6D,YAAY,GAAG,KAAKpH,aAAL,CAAmB,CAAnB,CAArB;AAEA,aAAO,KAAKlB,YAAL,CAAkBiI,MAAlB,CACL,eAAK;AAAA,eAAI1H,KAAK,CAACiI,MAAN,KACN,OAAKpH,YAAL,GAAoBnC,SAAS,CAACsB,KAAD,EAAQ8H,UAAR,CAA7B,GAAmDrJ,YAAY,CAACuB,KAAD,EAAQkE,GAAR,EAAa4D,UAAb,EAAyBC,YAAzB,CADzD,KAEP,OAAKJ,kBAAL,CAAwB3H,KAAxB,EAA+BkE,GAAG,CAAC7E,QAAnC,CAFG;AAAA,OADA,CAAP;AArSK;AA2SP6I,wBA3SO,gCA2SehE,GA3Sf,EA2SwC;AAAA;;AAC7C,UAAM4D,UAAU,GAAGxJ,gBAAgB,CAAC4F,GAAD,CAAnC;AACA,aAAO,KAAKzE,YAAL,CAAkBiI,MAAlB,CACL,eAAK;AAAA,eAAI,CAAC1H,KAAK,CAACiI,MAAP,IACPvJ,SAAS,CAACsB,KAAD,EAAQ8H,UAAR,CADF,IAEP,OAAKH,kBAAL,CAAwB3H,KAAxB,EAA+BkE,GAAG,CAAC7E,QAAnC,CAFG;AAAA,OADA,CAAP;AA7SK;AAmTP8I,kBAnTO,4BAmTO;AAAA;;AACZ,UAAI,KAAK5I,QAAT,EAAmB;AACjB,iCAAY,KAAKyG,YAAjB;AACD;;AAED,UAAMoC,IAAI,GAAG,KAAK3H,iBAAL,CACX,KAAKhB,YADM,EAEX,KAAKkB,aAAL,CAAmB,CAAnB,CAFW,EAGX,KAAKhB,2BAHM,CAAb;;AAMA,UAAM0I,MAAM,GAAI,SAAVA,MAAU,MAAD;AAAA,eAA0C,CAAC,CAAC7H,KAA5C;AAAA,OAAf;;AACA,UAAM8H,eAAe,GAAmB,SAAlCA,eAAkC,CAACpE,GAAD,EAAMqE,MAAN,EAAcC,MAAd,EAAsB1D,KAAtB,EAA+B;AACrE,YAAM3F,MAAM,GAAGoJ,MAAM,CAACrE,GAAD,CAArB;AACA,YAAMuE,OAAO,GAAGL,IAAI,CAAClE,GAAD,EAAM/E,MAAN,EAAc2F,KAAd,EAAqB,OAAKjE,YAA1B,CAApB;;AAEA,YAAIiE,KAAJ,EAAW;AACT,iBAAO2D,OAAO,CAAC/I,GAAR,CAAY,gBAAM;AAAA,mBAAI8I,MAAM,CAACE,MAAD,EAASxE,GAAT,CAAV;AAAA,WAAlB,EAA2CwD,MAA3C,CAAkDW,MAAlD,CAAP;AACD;;AAED,YAAMM,QAAQ,GAAY,EAA1B;AAEAF,eAAO,CAAC7E,OAAR,CAAgB,UAAC8E,MAAD,EAAStH,KAAT,EAAkB;AAChC,iBAAOuH,QAAQ,CAACnJ,MAAT,GAAkBkJ,MAAM,CAACE,MAAhC,EAAwC;AACtCD,oBAAQ,CAAC3E,IAAT,CAAc,OAAKsD,cAAL,CAAoBpD,GAApB,CAAd;AACD;;AAED,cAAM2E,MAAM,GAAGL,MAAM,CAACE,MAAD,EAASxE,GAAT,CAArB;;AACA,cAAI2E,MAAJ,EAAY;AACVF,oBAAQ,CAAC3E,IAAT,CAAc6E,MAAd;AACD;AARH;AAWA,eAAOF,QAAP;AArBF;;AAwBA,UAAMG,KAAK,GAAG,KAAK9C,YAAnB;AACA,UAAM+C,OAAO,GAAGD,KAAK,CAAC5E,GAAtB;AACA,UAAM8E,aAAa,GAAGF,KAAK,CAAC,YAAD,CAA3B;AACA,UAAMG,WAAW,GAAGH,KAAK,CAAC,UAAD,CAAzB;AAEA,6CACKA,KADL;AAEE5E,WAAG,EAAG,iBAAD,EAA8B;AACjC,cAAIyE,QAAQ,GAAGL,eAAe,CAACpE,IAAD,EAAM,OAAK2D,eAAX,EAA4B,OAAK5D,WAAjC,EAA8C,KAA9C,CAA9B;;AACA,cAAI0E,QAAQ,IAAIA,QAAQ,CAACnJ,MAAT,GAAkB,CAA9B,IAAmC,OAAKyC,SAA5C,EAAuD;AACrD0G,oBAAQ,CAAC3E,IAAT,CAAc,OAAKuD,OAAL,CAAarD,IAAb,CAAd;AACD;;AACD,cAAI6E,OAAJ,EAAa;AACX,gBAAMhD,IAAI,GAAGgD,OAAO,CAAC7E,IAAD,CAApB;;AACA,gBAAI6B,IAAJ,EAAU;AACR4C,sBAAQ,GAAGA,QAAQ,GAAGA,QAAQ,CAACO,MAAT,CAAgBnD,IAAhB,CAAH,GAA2BA,IAA9C;AACD;AACF;;AACD,iBAAO4C,QAAP;AAbG,SAAP;AAeE,sBAAe,sBAAD,EAA8B;AAC1C,cAAIA,QAAQ,GAAGL,eAAe,CAACpE,GAAD,EAAM,OAAK8D,kBAAX,EAA+B,OAAK/D,WAApC,EAAiD,KAAjD,CAA9B;;AAEA,cAAI+E,aAAJ,EAAmB;AACjB,gBAAMjD,IAAI,GAAGiD,aAAa,CAAC9E,GAAD,CAA1B;;AACA,gBAAI6B,IAAJ,EAAU;AACR4C,sBAAQ,GAAGA,QAAQ,GAAGA,QAAQ,CAACO,MAAT,CAAgBnD,IAAhB,CAAH,GAA2BA,IAA9C;AACD;AACF;;AACD,iBAAO4C,QAAP;AAxBG,SAAP;AA0BE,oBAAa,oBAAD,EAAkC;AAC5C,cAAMxJ,MAAM,GAAGmJ,eAAe,CAACpE,GAAD,EAAM,OAAKgE,oBAAX,EAAiC,OAAK5C,aAAtC,EAAqD,IAArD,CAA9B;AACA,cAAIqD,QAAQ,GAAY,CACtB,OAAK/B,cAAL,CAAoB,KAApB,EAA2B;AACzB5B,uBAAW,EAAE;AADY,WAA3B,EAEG7F,MAFH,CADsB,CAAxB;;AAMA,cAAI8J,WAAJ,EAAiB;AACf,gBAAMlD,IAAI,GAAGkD,WAAW,CAAC/E,GAAD,CAAxB;;AACA,gBAAI6B,IAAJ,EAAU;AACR4C,sBAAQ,GAAGA,QAAQ,CAACO,MAAT,CAAgBnD,IAAhB,CAAX;AACD;AACF;;AACD,iBAAO4C,QAAP;AACD;AAzCH;AA2CD;AAvYM;AAxDwB,CAApB,CAAf","names":["ripple","CalendarBase","escapeHTML","props","CalendarEventOverlapModes","getDayIdentifier","diffMinutes","parseEvent","isEventStart","isEventOn","isEventOverlapping","isEventHiddenOn","WIDTH_FULL","WIDTH_START","MINUTES_IN_DAY","extend","name","directives","events","calendar","category","computed","noEvents","length","parsedEvents","map","parsedEventOverlapThreshold","parseInt","eventOverlapThreshold","eventTimedFunction","eventTimed","event","eventCategoryFunction","eventCategory","eventTextColorFunction","eventTextColor","eventNameFunction","eventName","timedEvent","input","eventModeFunction","eventOverlapMode","eventWeekdays","parsedWeekdays","categoryMode","type","methods","eventColorFunction","e","eventColor","color","index","eventStart","eventEnd","formatTime","withTime","ampm","formatter","getFormatter","timeZone","hour","minute","undefined","updateEventVisibility","eventMore","eventHeight","eventsMap","getEventsMap","date","parent","more","parentBounds","getBoundingClientRect","last","eventsSorted","bottom","sort","a","b","hidden","i","hide","style","display","innerHTML","$vuetify","lang","t","eventMoreText","elements","$refs","forEach","el","getAttribute","parentElement","push","genDayEvent","day","eventMarginBottom","dayIdentifier","week","start","startIdentifier","end","endIdentifier","width","weekdayIdentifier","scope","eventParsed","timed","genEvent","staticClass","height","attrs","key","ref","refInFor","genTimedEvent","left","timeDelta","top","timeToY","Math","max","scopeInput","data","slot","$scopedSlots","text","background","overlapsNoon","singline","timeSummary","eventSummary","hasTime","eventSummaryClass","time","delimiter","outside","$createElement","setTextColor","setBackgroundColor","on","getDefaultMouseEventHandlers","nativeEvent","value","eventRipple","genName","domProps","genPlaceholder","genMore","getVisibleEvents","days","filter","isEventForCategory","categoryName","getEventsForDay","identifier","firstWeekday","getEventsForDayAll","allDay","getEventsForDayTimed","getScopedSlots","mode","isNode","getSlotChildren","getter","mapper","visuals","visual","children","column","mapped","slots","slotDay","slotDayHeader","slotDayBody","concat"],"sourceRoot":"","sources":["../../../../src/components/VCalendar/mixins/calendar-with-events.ts"],"sourcesContent":["// Styles\nimport './calendar-with-events.sass'\n\n// Types\nimport { VNode, VNodeData } from 'vue'\n\n// Directives\nimport ripple from '../../../directives/ripple'\n\n// Mixins\nimport CalendarBase from './calendar-base'\n\n// Helpers\nimport { escapeHTML } from '../../../util/helpers'\n\n// Util\nimport props from '../util/props'\nimport {\n  CalendarEventOverlapModes,\n} from '../modes'\nimport {\n  getDayIdentifier, diffMinutes,\n} from '../util/timestamp'\nimport {\n  parseEvent,\n  isEventStart,\n  isEventOn,\n  isEventOverlapping,\n  isEventHiddenOn,\n} from '../util/events'\nimport {\n  CalendarTimestamp,\n  CalendarEventParsed,\n  CalendarEventVisual,\n  CalendarEventColorFunction,\n  CalendarEventNameFunction,\n  CalendarEventTimedFunction,\n  CalendarDaySlotScope,\n  CalendarDayBodySlotScope,\n  CalendarEventOverlapMode,\n  CalendarEvent,\n  CalendarEventCategoryFunction,\n  CalendarCategory,\n} from 'vuetify/types'\n\n// Types\ntype VEventGetter<D> = (day: D) => CalendarEventParsed[]\n\ntype VEventVisualToNode<D> = (visual: CalendarEventVisual, day: D) => VNode | false\n\ntype VEventsToNodes = <D extends CalendarDaySlotScope>(\n  day: D,\n  getter: VEventGetter<D>,\n  mapper: VEventVisualToNode<D>,\n  timed: boolean) => VNode[] | undefined\n\ntype VDailyEventsMap = {\n  [date: string]: {\n    parent: HTMLElement\n    more: HTMLElement | null\n    events: HTMLElement[]\n  }\n}\n\ninterface VEventScopeInput {\n  eventParsed: CalendarEventParsed\n  day: CalendarDaySlotScope\n  start: boolean\n  end: boolean\n  timed: boolean\n}\n\nconst WIDTH_FULL = 100\nconst WIDTH_START = 95\nconst MINUTES_IN_DAY = 1440\n\n/* @vue/component */\nexport default CalendarBase.extend({\n  name: 'calendar-with-events',\n\n  directives: {\n    ripple,\n  },\n\n  props: {\n    ...props.events,\n    ...props.calendar,\n    ...props.category,\n  },\n\n  computed: {\n    noEvents (): boolean {\n      return this.events.length === 0\n    },\n    parsedEvents (): CalendarEventParsed[] {\n      return this.events.map(this.parseEvent)\n    },\n    parsedEventOverlapThreshold (): number {\n      return parseInt(this.eventOverlapThreshold)\n    },\n    eventTimedFunction (): CalendarEventTimedFunction {\n      return typeof this.eventTimed === 'function'\n        ? this.eventTimed\n        : event => !!event[this.eventTimed as string]\n    },\n    eventCategoryFunction (): CalendarEventCategoryFunction {\n      return typeof this.eventCategory === 'function'\n        ? this.eventCategory\n        : event => event[this.eventCategory as string]\n    },\n    eventTextColorFunction (): CalendarEventColorFunction {\n      return typeof this.eventTextColor === 'function'\n        ? this.eventTextColor\n        : () => this.eventTextColor as string\n    },\n    eventNameFunction (): CalendarEventNameFunction {\n      return typeof this.eventName === 'function'\n        ? this.eventName\n        : (event, timedEvent) => escapeHTML(event.input[this.eventName as string] as string || '')\n    },\n    eventModeFunction (): CalendarEventOverlapMode {\n      return typeof this.eventOverlapMode === 'function'\n        ? this.eventOverlapMode\n        : CalendarEventOverlapModes[this.eventOverlapMode]\n    },\n    eventWeekdays (): number[] {\n      return this.parsedWeekdays\n    },\n    categoryMode (): boolean {\n      return this.type === 'category'\n    },\n  },\n\n  methods: {\n    eventColorFunction (e: CalendarEvent): string {\n      return typeof this.eventColor === 'function'\n        ? this.eventColor(e)\n        : e.color || this.eventColor\n    },\n    parseEvent (input: CalendarEvent, index = 0): CalendarEventParsed {\n      return parseEvent(\n        input,\n        index,\n        this.eventStart,\n        this.eventEnd,\n        this.eventTimedFunction(input),\n        this.categoryMode ? this.eventCategoryFunction(input) : false,\n      )\n    },\n    formatTime (withTime: CalendarTimestamp, ampm: boolean): string {\n      const formatter = this.getFormatter({\n        timeZone: 'UTC',\n        hour: 'numeric',\n        minute: withTime.minute > 0 ? 'numeric' : undefined,\n      })\n\n      return formatter(withTime, true)\n    },\n    updateEventVisibility () {\n      if (this.noEvents || !this.eventMore) {\n        return\n      }\n\n      const eventHeight = this.eventHeight\n      const eventsMap = this.getEventsMap()\n\n      for (const date in eventsMap) {\n        const { parent, events, more } = eventsMap[date]\n        if (!more) {\n          break\n        }\n\n        const parentBounds = parent.getBoundingClientRect()\n        const last = events.length - 1\n        const eventsSorted = events.map(event => ({\n          event,\n          bottom: event.getBoundingClientRect().bottom,\n        })).sort((a, b) => a.bottom - b.bottom)\n        let hidden = 0\n\n        for (let i = 0; i <= last; i++) {\n          const bottom = eventsSorted[i].bottom\n          const hide = i === last\n            ? (bottom > parentBounds.bottom)\n            : (bottom + eventHeight > parentBounds.bottom)\n\n          if (hide) {\n            eventsSorted[i].event.style.display = 'none'\n            hidden++\n          }\n        }\n\n        if (hidden) {\n          more.style.display = ''\n          more.innerHTML = this.$vuetify.lang.t(this.eventMoreText, hidden)\n        } else {\n          more.style.display = 'none'\n        }\n      }\n    },\n    getEventsMap (): VDailyEventsMap {\n      const eventsMap: VDailyEventsMap = {}\n      const elements = this.$refs.events as HTMLElement[]\n\n      if (!elements || !elements.forEach) {\n        return eventsMap\n      }\n\n      elements.forEach(el => {\n        const date = el.getAttribute('data-date')\n        if (el.parentElement && date) {\n          if (!(date in eventsMap)) {\n            eventsMap[date] = {\n              parent: el.parentElement,\n              more: null,\n              events: [],\n            }\n          }\n          if (el.getAttribute('data-more')) {\n            eventsMap[date].more = el\n          } else {\n            eventsMap[date].events.push(el)\n            el.style.display = ''\n          }\n        }\n      })\n\n      return eventsMap\n    },\n    genDayEvent ({ event }: CalendarEventVisual, day: CalendarDaySlotScope): VNode {\n      const eventHeight = this.eventHeight\n      const eventMarginBottom = this.eventMarginBottom\n      const dayIdentifier = getDayIdentifier(day)\n      const week = day.week\n      const start = dayIdentifier === event.startIdentifier\n      let end = dayIdentifier === event.endIdentifier\n      let width = WIDTH_START\n\n      if (!this.categoryMode) {\n        for (let i = day.index + 1; i < week.length; i++) {\n          const weekdayIdentifier = getDayIdentifier(week[i])\n          if (event.endIdentifier >= weekdayIdentifier) {\n            width += WIDTH_FULL\n            end = end || weekdayIdentifier === event.endIdentifier\n          } else {\n            end = true\n            break\n          }\n        }\n      }\n      const scope = { eventParsed: event, day, start, end, timed: false }\n\n      return this.genEvent(event, scope, false, {\n        staticClass: 'v-event',\n        class: {\n          'v-event-start': start,\n          'v-event-end': end,\n        },\n        style: {\n          height: `${eventHeight}px`,\n          width: `${width}%`,\n          'margin-bottom': `${eventMarginBottom}px`,\n        },\n        attrs: {\n          'data-date': day.date,\n        },\n        key: event.index,\n        ref: 'events',\n        refInFor: true,\n      })\n    },\n    genTimedEvent ({ event, left, width }: CalendarEventVisual, day: CalendarDayBodySlotScope): VNode | false {\n      if (day.timeDelta(event.end) < 0 || day.timeDelta(event.start) >= 1 || isEventHiddenOn(event, day)) {\n        return false\n      }\n\n      const dayIdentifier = getDayIdentifier(day)\n      const start = event.startIdentifier >= dayIdentifier\n      const end = event.endIdentifier > dayIdentifier\n      const top = start ? day.timeToY(event.start) : 0\n      const bottom = end ? day.timeToY(MINUTES_IN_DAY) : day.timeToY(event.end)\n      const height = Math.max(this.eventHeight, bottom - top)\n      const scope = { eventParsed: event, day, start, end, timed: true }\n\n      return this.genEvent(event, scope, true, {\n        staticClass: 'v-event-timed',\n        style: {\n          top: `${top}px`,\n          height: `${height}px`,\n          left: `${left}%`,\n          width: `${width}%`,\n        },\n      })\n    },\n    genEvent (event: CalendarEventParsed, scopeInput: VEventScopeInput, timedEvent: boolean, data: VNodeData): VNode {\n      const slot = this.$scopedSlots.event\n      const text = this.eventTextColorFunction(event.input)\n      const background = this.eventColorFunction(event.input)\n      const overlapsNoon = event.start.hour < 12 && event.end.hour >= 12\n      const singline = diffMinutes(event.start, event.end) <= this.parsedEventOverlapThreshold\n      const formatTime = this.formatTime\n      const timeSummary = () => formatTime(event.start, overlapsNoon) + ' - ' + formatTime(event.end, true)\n      const eventSummary = () => {\n        const name = this.eventNameFunction(event, timedEvent)\n        if (event.start.hasTime) {\n          const eventSummaryClass = 'v-event-summary'\n          if (timedEvent) {\n            const time = timeSummary()\n            const delimiter = singline ? ', ' : '<br>'\n\n            return `<span class=\"${eventSummaryClass}\"><strong>${name}</strong>${delimiter}${time}</span>`\n          } else {\n            const time = formatTime(event.start, true)\n\n            return `<span class=\"${eventSummaryClass}\"><strong>${time}</strong> ${name}</span>`\n          }\n        }\n\n        return name\n      }\n\n      const scope = {\n        ...scopeInput,\n        event: event.input,\n        outside: scopeInput.day.outside,\n        singline,\n        overlapsNoon,\n        formatTime,\n        timeSummary,\n        eventSummary,\n      }\n\n      return this.$createElement('div',\n        this.setTextColor(text,\n          this.setBackgroundColor(background, {\n            on: this.getDefaultMouseEventHandlers(':event', nativeEvent => ({ ...scope, nativeEvent })),\n            directives: [{\n              name: 'ripple',\n              value: this.eventRipple ?? true,\n            }],\n            ...data,\n          })\n        ), slot\n          ? slot(scope)\n          : [this.genName(eventSummary)]\n      )\n    },\n    genName (eventSummary: () => string): VNode {\n      return this.$createElement('div', {\n        staticClass: 'pl-1',\n        domProps: {\n          innerHTML: eventSummary(),\n        },\n      })\n    },\n    genPlaceholder (day: CalendarTimestamp): VNode {\n      const height = this.eventHeight + this.eventMarginBottom\n\n      return this.$createElement('div', {\n        style: {\n          height: `${height}px`,\n        },\n        attrs: {\n          'data-date': day.date,\n        },\n        ref: 'events',\n        refInFor: true,\n      })\n    },\n    genMore (day: CalendarDaySlotScope): VNode {\n      const eventHeight = this.eventHeight\n      const eventMarginBottom = this.eventMarginBottom\n\n      return this.$createElement('div', {\n        staticClass: 'v-event-more pl-1',\n        class: {\n          'v-outside': day.outside,\n        },\n        attrs: {\n          'data-date': day.date,\n          'data-more': 1,\n        },\n        directives: [{\n          name: 'ripple',\n          value: this.eventRipple ?? true,\n        }],\n        on: this.getDefaultMouseEventHandlers(':more', nativeEvent => {\n          return { nativeEvent, ...day }\n        }),\n\n        style: {\n          display: 'none',\n          height: `${eventHeight}px`,\n          'margin-bottom': `${eventMarginBottom}px`,\n        },\n        ref: 'events',\n        refInFor: true,\n      })\n    },\n    getVisibleEvents (): CalendarEventParsed[] {\n      const start = getDayIdentifier(this.days[0])\n      const end = getDayIdentifier(this.days[this.days.length - 1])\n\n      return this.parsedEvents.filter(\n        event => isEventOverlapping(event, start, end)\n      )\n    },\n    isEventForCategory (event: CalendarEventParsed, category: CalendarCategory): boolean {\n      return !this.categoryMode ||\n        (typeof category === 'object' && category.categoryName &&\n        category.categoryName === event.category) ||\n        (typeof event.category === 'string' && category === event.category) ||\n        (typeof event.category !== 'string' && category === null)\n    },\n    getEventsForDay (day: CalendarDaySlotScope): CalendarEventParsed[] {\n      const identifier = getDayIdentifier(day)\n      const firstWeekday = this.eventWeekdays[0]\n\n      return this.parsedEvents.filter(\n        event => isEventStart(event, day, identifier, firstWeekday)\n      )\n    },\n    getEventsForDayAll (day: CalendarDaySlotScope): CalendarEventParsed[] {\n      const identifier = getDayIdentifier(day)\n      const firstWeekday = this.eventWeekdays[0]\n\n      return this.parsedEvents.filter(\n        event => event.allDay &&\n          (this.categoryMode ? isEventOn(event, identifier) : isEventStart(event, day, identifier, firstWeekday)) &&\n          this.isEventForCategory(event, day.category)\n      )\n    },\n    getEventsForDayTimed (day: CalendarDaySlotScope): CalendarEventParsed[] {\n      const identifier = getDayIdentifier(day)\n      return this.parsedEvents.filter(\n        event => !event.allDay &&\n          isEventOn(event, identifier) &&\n          this.isEventForCategory(event, day.category)\n      )\n    },\n    getScopedSlots () {\n      if (this.noEvents) {\n        return { ...this.$scopedSlots }\n      }\n\n      const mode = this.eventModeFunction(\n        this.parsedEvents,\n        this.eventWeekdays[0],\n        this.parsedEventOverlapThreshold\n      )\n\n      const isNode = (input: VNode | false): input is VNode => !!input\n      const getSlotChildren: VEventsToNodes = (day, getter, mapper, timed) => {\n        const events = getter(day)\n        const visuals = mode(day, events, timed, this.categoryMode)\n\n        if (timed) {\n          return visuals.map(visual => mapper(visual, day)).filter(isNode)\n        }\n\n        const children: VNode[] = []\n\n        visuals.forEach((visual, index) => {\n          while (children.length < visual.column) {\n            children.push(this.genPlaceholder(day))\n          }\n\n          const mapped = mapper(visual, day)\n          if (mapped) {\n            children.push(mapped)\n          }\n        })\n\n        return children\n      }\n\n      const slots = this.$scopedSlots\n      const slotDay = slots.day\n      const slotDayHeader = slots['day-header']\n      const slotDayBody = slots['day-body']\n\n      return {\n        ...slots,\n        day: (day: CalendarDaySlotScope) => {\n          let children = getSlotChildren(day, this.getEventsForDay, this.genDayEvent, false)\n          if (children && children.length > 0 && this.eventMore) {\n            children.push(this.genMore(day))\n          }\n          if (slotDay) {\n            const slot = slotDay(day)\n            if (slot) {\n              children = children ? children.concat(slot) : slot\n            }\n          }\n          return children\n        },\n        'day-header': (day: CalendarDaySlotScope) => {\n          let children = getSlotChildren(day, this.getEventsForDayAll, this.genDayEvent, false)\n\n          if (slotDayHeader) {\n            const slot = slotDayHeader(day)\n            if (slot) {\n              children = children ? children.concat(slot) : slot\n            }\n          }\n          return children\n        },\n        'day-body': (day: CalendarDayBodySlotScope) => {\n          const events = getSlotChildren(day, this.getEventsForDayTimed, this.genTimedEvent, true)\n          let children: VNode[] = [\n            this.$createElement('div', {\n              staticClass: 'v-event-timed-container',\n            }, events),\n          ]\n\n          if (slotDayBody) {\n            const slot = slotDayBody(day)\n            if (slot) {\n              children = children.concat(slot)\n            }\n          }\n          return children\n        },\n      }\n    },\n  },\n})\n"]}]}